<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Vanilla Forums, create an online community that your customers will love">
        <meta name="author" content="Vanilla Community">

        <title>Vanilla Forums Documentation</title>
        
        <link href="/css/docs.css" rel="stylesheet">
        <link href="/css/fonts/fontawesome/css/font-awesome.min.css" rel="stylesheet">
        
        <script src="/js/vendor/jquery-3.0.0.min.js"></script>
        <script src="/js/vendor/jquery.store.js"></script>
        <script src="/js/lunr-index.json" id="search-manifest" type="application/json"></script>
        <script src="/js/vendor/lunr.js"></script>
        <script src="/js/search.js"></script>
        
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
        <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
        <style type="text/css">
            .callout {
                table-layout: fixed;
            }
        </style>
    </head>

    <body class="docs grid docs-layout-single docs-layout-section-help">
        
        <header class="docs-header">
    
    <div class="row">

        <div class="column column-4">
            
            <a class="vertical-group docs-header-logo" href="/">
                <img class="logo" src="/img/logo.svg" alt="Vanilla Forums" width="102" height="41" />
                <span class="docs-docs-tag">Docs</span>
            </a>
            
        </div>
        
        <div class="column column-8">
            <div class="vertical-group docs-header-tray">
                <div class="docs-header-search js-search">
    <div class="docs-search-wrap">
        <i class="fa fa-search" ></i>
        <input class="docs-search js-search-input" id="docs-search" />
    </div>
    <ul class="docs-search-results js-search-results">
        <a>
            <li>
                <span class="title"></span>
                <span class="tags"></span>
            </li>
        </a>
    </ul>
</div>
                <div class="docs-cta">
    <a href="http://pages.vanillaforums.com/demo-request-vanilla-forums?utm_source=vanilladocs&utm_medium=cta&utm_campaign=demo-request" class="docs-button button-primary button-small">Request a Demo</a>
</div>
            </div>
        </div>

    </div>

</header>
        
        <div class="docs-title-wrapper">
            <div class="row">
                <div class="column column-3"></div>
                <div id="title" class="column column-9">
                    <div class="docs-title">
    <h1>Advanced Embedding</h1>
    
    <div class="docs-page docs-improve">
          <a href="https://github.com/vanilla/docs/edit/master/content/help/features/embedding/advanced.md"><i class="fa fa-pencil"></i>Improve this document</a>
    </div>
    
</div>
                </div>
            </div>
        </div>
        

<div class="docs-content">
    <div class="row">
        <div id="nav" class="column column-3">
            <aside id="sidebar">
    <div class="docs-nav nav-collapse">
        
        <ul class="sidebar-menu nav-tier1">




    <li  class="">
        <a href="/help/getting-started/">Getting Started</a>
    </li>
    
    
	    


    <li  class="active nest">
        <a href="/help/features/">Features</a>
    </li>
    
    
        
        
        
        
            <ul class="nav-tier2">
	    
                <li class="">
                    <a href="/help/features/accessibility/">Accessibility </a>
                </li>
                
                

	    
	    
                <li class="">
                    <a href="/help/features/categories/">Categories </a>
                </li>
                
                

	    
	    
                <li class="">
                    <a href="/help/features/emails/">Emails </a>
                </li>
                
                

	    
	    
                <li class="active nest">
                    <a href="/help/features/embedding/">Embedding </a>
                </li>
                
                
                    
                    
               
                    
                        <ul class="nav-tier3">

                            <li class="active">
                                <a href="/help/features/embedding/advanced/">Advanced Embedding</a>
                            </li>

                            
                                
                                
                                
                                
			    
		    
                        </ul>
                    
                

	    
	    
                <li class="">
                    <a href="/help/features/emoji/">Emoji </a>
                </li>
                
                

	    
	    
                <li class="">
                    <a href="/help/features/notifications/">Notifications </a>
                </li>
                
                

	    
	    
                <li class=" nest">
                    <a href="/help/features/roles-permissions/">Roles &amp; Permissions </a>
                </li>
                
                

	    
	    
                <li class=" nest">
                    <a href="/help/features/sso/">Single Sign-On (SSO) </a>
                </li>
                
                

	    
	    
                <li class="">
                    <a href="/help/features/comments/">Universal Comments </a>
                </li>
                
                

	    
	    
                <li class=" nest">
                    <a href="/help/features/wordpress/">WordPress Integration </a>
                </li>
                
                

	    </ul>
        
    
	    


    <li  class=" nest">
        <a href="/help/cloud/">Cloud Services</a>
    </li>
    
    
	    


    <li  class=" nest">
        <a href="/help/addons/">Addons</a>
    </li>
    
    
	    



        </ul>
        
    </div>
</aside>
        </div>

        <div id="content" class="column column-9">

            

                

<h2 id="overview">Overview</h2>

<p>The advanced embedding technique is for developers who require programmatic interaction between the Vanilla iframe and their parent window. It employs <a href="http://easyxdm.net/wp/">easyXDM</a> and a special container layer to achieve this. It requires a more in-depth setup than Vanilla&rsquo;s basic embed solution.</p>

<h2 id="setting-up-advanced-embedding">Setting Up Advanced Embedding</h2>

<p>Enable forum embedding via the Dashboard. Then set <code>Garden.Embed.Allow</code> to <code>2</code> in your config. <em>Cloud customers will have this done by support staff</em>.</p>

<ol>
<li>Include easyXDM: <code>/js/easyXDM/easyXDM.min.js</code></li>
<li>Include Vanilla&rsquo;s advanced embed script: <code>/js/vanilla.embed.js</code></li>
<li>Create a div to contain Vanilla and give it an ID.</li>
<li>Call <code>Vanilla.embed({options})</code>.</li>
</ol>

<h3 id="options">Options</h3>

<p>Vanilla.embed() takes an associative array of options:</p>

<p><code>root</code> <strong>Required</strong>. The root url of your Vanilla forum. Example: <a href="http://community.yoursite.com">http://community.yoursite.com</a></p>

<p><code>container</code> <strong>Required</strong>. The ID or DOM element of the container for Vanilla.</p>

<p><code>initialPath</code> <strong>Optional</strong>. The initial path to browse to when embedding the forum. Our example below demonstrates using the hash part of the URL to automatically set this, e.g. <code>site.com/embedpage#/categories/some-category</code>.</p>

<p><code>sso</code> <strong>Optional</strong>. An SSO string that will automatically sign the user into Vanilla. See <a href="https://github.com/vanillaforums/jsConnectPHP/blob/master/functions.jsconnect.php#L130">our example code</a>.</p>

<p><code>autoStart</code> <strong>Optional</strong>. Whether or not to start the embed when <code>embed()</code> is called. If this is false then you must call embed.start() to start the embed. Default: <code>true</code>.</p>

<p><code>onReady()</code> <strong>Optional</strong>. A callback function to call when the embed is ready.</p>

<p><code>notifyLocation(path)</code> <strong>Optional</strong>. A function that will be called when the url of the embedded iframe changes. You can use this callback to update your history. By default this function adds the path as the current location&rsquo;s # fragment. Combine this with initialPath to implement your own custom history.</p>

<p><code>height(x)</code> <strong>Optional</strong>. A function that is called to set the height of the embedded iframe. If you override this method then you can access the embedded iframe using <code>this.iframe</code>.</p>

<h3 id="methods">Methods</h3>

<p><code>start()</code> Start the embed. Only call this method if you set autoStart to <code>false</code>.</p>

<p><code>setLocation(path)</code> Manually set the location of the embedded iframe. Just specify the path and not the full domain of the embed.</p>

<h2 id="custom-callbacks">Custom Callbacks</h2>

<p>The embed API allows custom Javascript to be called between the parent and child iframes.</p>

<h2 id="exposing-a-method-to-vanilla">Exposing a method to Vanilla</h2>

<p>You can expose a method to the child iframe with the following code:</p>

<pre><code class="language-javascript">Vanilla.embed.fn.functionName = function(args,...) { â€¦ }
</code></pre>

<p>The embed requires all functions on both sides to be explicitly registered to prevent a third party hijacking the embed and calling functions with unforeseen consequences.</p>

<p>Vanilla embed supports a callback function on both ends of the embed. If you want to support a callback function then declare it as the last argument of your function. When the other endpoint of the embed calls your function using <code>callRemote()</code> it can then specify a callback and the framework will handle calling the callback across the domain.</p>

<h2 id="calling-a-method-in-vanilla">Calling a method in Vanilla</h2>

<p>You can call a method in Vanilla with the following code:</p>

<pre><code class="language-javascript">Vanilla.embed.callRemote(&quot;functionName&quot;, args [, callback]);
</code></pre>

<p>If you supply the callback argument to <code>callRemote()</code> then it will be supplied as the last argument to the remote function. It is the remote functionâ€™s job to call the function. Keep in mind that using <code>call()</code>, <code>apply()</code>, etc. to set a context for the function will not work as a context cannot be passed across the domain.</p>

<h3 id="functions-you-can-call-on-vanilla">Functions you can call on Vanilla</h3>

<p><code>Vanilla.embed.signout()</code> Calling this function will sign the user out of Vanilla. It wonâ€™t refresh the page so you may want to do that afterwards.</p>

<h2 id="example-implementation">Example implementation</h2>

<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
   &lt;head&gt;
   	  &lt;meta charset=&quot;utf-8&quot;&gt;
   	  &lt;title&gt;Sample Embed&lt;/title&gt;
   	  &lt;style&gt;
         body {
            margin: 0;
         }
         #embedVanilla iframe {
            width: 100%;
         }
      &lt;/style&gt;
      &lt;script type=&quot;text/javascript&quot; src=&quot;js/easyXDM/easyXDM.min.js&quot;&gt;&lt;/script&gt;
      &lt;script type=&quot;text/javascript&quot; src=&quot;js/vanilla.embed.js&quot;&gt;&lt;/script&gt;
   &lt;/head&gt;
   &lt;body style=&quot;background: #ff6600;&quot;&gt;
      &lt;div style=&quot;height: 50px&quot;&gt;foo&lt;/div&gt;
      &lt;div id=&quot;embedVanilla&quot;&gt;&lt;/div&gt;
      &lt;script type=&quot;text/javascript&quot;&gt;
        // Help older browsers parse JSON.
        easyXDM.DomHelper.requiresJSON(&quot;js/easyXDM/json2.js&quot;);

        var vanillaEmbed = new Vanilla.embed({
          // The element or its ID.
          container: &quot;embedVanilla&quot;,
          // This is the location of the forum.
          root: &quot;http://yoursite.local&quot;,
          // initial path, please start it with a &quot;/&quot;
          initialPath: window.location.hash.substring(1),
          onReady: function() {
            // A lot of the functions need to be done after the embed is ready.

            // This how you set the location of the embedded frame.
            // vanillaEmbed.setLocation('/categories');
          }
        });
      &lt;/script&gt;
   &lt;/body&gt;
&lt;/html&gt;
</code></pre>


            
            
        </div>
    </div>
</div>

        
        <div class="docs-platform">
    
    <div class="row">
    
        <div class="column column-6">
            <div class="docs-platform-choice choice-cloud">
                <h3>Cloud Hosted</h3>
                <p>
                    <b>We believe that online communities should be intuitive, engaging and true to your brand.</b> Vanilla allows you to create a customized community that rewards positive participation, automatically curates content and lets members drive moderation.
                </p>
                <p>
                    <a href="https://vanillaforums.com">Learn more</a>
                </p>
            </div>
        </div>
        <div class="column column-6">
            <div class="docs-platform-choice choice-oss">
                <h3>Open Source</h3>
                <p>
                    Vanilla provides cloud and open source community forum software that powers discussion forums on more than 700,000 sites. Built for flexibility and integration, <b>Vanilla is the best, most powerful community solution in the world.</b>
                </p>
                <p>
                    <a href="https://vanillaforums.org">Learn more</a>
                </p>
            </div>
        </div>
        
    </div>
    
</div>
        
        <footer class="docs-footer">
    
    <div class="row">
        
        <div class="column column-6">
            <div class="docs-copyright">
    Copyright &copy 2009-2016 Vanilla Forums, Inc. All rights reserved.
</div>
        </div>
        
        <div class="column column-6">
            <div class="docs-links">
    <a class="docs-links-item item-docs" href="http://docs.vanillaforums.com">Documentation</a>
    <a class="docs-links-item item-blog" href="https://blog.vanillaforums.com">Blog</a>
    <a class="docs-links-item item-cloud" href="https://vanillaforums.com">Cloud</a>
    <a class="docs-links-item item-community" href="https://vanillaforums.org/discussions">Community</a>
    <a class="docs-links-item item-github" href="https://github.com/vanilla/vanilla">GitHub</a>
    <a class="docs-links-item item-issues" href="https://github.com/vanilla/vanilla/issues">Issues</a>
</div>
        </div>
        
    </div>
</footer>
        
    </body>
    
</html>
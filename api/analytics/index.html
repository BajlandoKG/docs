<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Vanilla Forums, create an online community that your customers will love">
        <meta name="author" content="Vanilla Community">

        <title>Vanilla Forums Documentation</title>
        
        <link href="//docs.vanillaforums.com/css/docs.css" rel="stylesheet">
        <link href="//docs.vanillaforums.com/css/fonts/fontawesome/css/font-awesome.min.css" rel="stylesheet">
        
        <script src="//docs.vanillaforums.com/js/vendor/jquery-3.0.0.min.js"></script>
        <script src="//docs.vanillaforums.com/js/vendor/jquery.store.js"></script>
        <script src="//docs.vanillaforums.com/js/lunr-index.json" id="search-manifest" type="application/json"></script>
        <script src="//docs.vanillaforums.com/js/vendor/lunr.js"></script>
        <script src="//docs.vanillaforums.com/js/search.js"></script>
        
        <link rel="shortcut icon" href="//docs.vanillaforums.com/favicon.ico" type="image/x-icon" />
        <link rel="apple-touch-icon" href="//docs.vanillaforums.com/apple-touch-icon.png" />
        <style type="text/css">
            .callout {
                table-layout: fixed;
            }
        </style>
    </head>

    <body class="docs grid docs-layout-single docs-layout-section-api">
        
        <header class="docs-header">
    
    <div class="row">

        <div class="column column-4">
            
            <a class="vertical-group docs-header-logo" href="//docs.vanillaforums.com/">
                <img class="logo" src="//docs.vanillaforums.com/img/logo.svg" alt="Vanilla Forums" width="102" height="41" />
                <span class="docs-docs-tag">API Docs</span>
            </a>
            
        </div>
        
        <div class="column column-8">
            <div class="vertical-group docs-header-tray">
                <div class="docs-header-search js-search">
    <div class="docs-search-wrap">
        <i class="fa fa-search" ></i>
        <input class="docs-search js-search-input" id="docs-search" />
    </div>
    <ul class="docs-search-results js-search-results">
        <a>
            <li>
                <span class="title"></span>
                <span class="tags"></span>
            </li>
        </a>
    </ul>
</div>
                <div class="docs-cta">
    <a href="http://pages.vanillaforums.com/demo-request-vanilla-forums?utm_source=vanilladocs&utm_medium=cta&utm_campaign=demo-request" class="docs-button button-primary button-small">Request a Demo</a>
</div>
            </div>
        </div>

    </div>

</header>
        
        <div class="docs-title-wrapper">
            <div class="row">
                <div class="column column-3"></div>
                <div id="title" class="column column-9">
                    <div class="docs-title">
    <h1>Endpoint: analytics</h1>
    
    <div class="docs-page docs-improve">
          <a href="https://github.com/vanilla/docs/edit/master/content/api/analytics/index.md"><i class="fa fa-pencil"></i>Improve this document</a>
    </div>
    
</div>
                </div>
            </div>
        </div>
        

<div class="docs-content">
    <div class="row">
        <div id="nav" class="column column-3">
            <aside id="sidebar">
    <div class="docs-nav nav-collapse">
        
        <ul class="sidebar-menu nav-tier1">




    <li  class="">
        <a href="//docs.vanillaforums.com/api/smart-id/">Smart ID</a>
    </li>
    
    
	    


    <li  class="">
        <a href="//docs.vanillaforums.com/api/use-api-on-external-site/">Use API on External Sites</a>
    </li>
    
    
	    


    <li  class="">
        <a href="//docs.vanillaforums.com/api/forum-administration/">Forum Administration</a>
    </li>
    
    
	    


    <li  class="">
        <a href="//docs.vanillaforums.com/api/categories/">Endpoint: categories</a>
    </li>
    
    
	    


    <li  class="">
        <a href="//docs.vanillaforums.com/api/discussions/">Endpoint: discussions</a>
    </li>
    
    
	    


    <li  class="">
        <a href="//docs.vanillaforums.com/api/comments/">Endpoint: comments</a>
    </li>
    
    
	    


    <li  class="">
        <a href="//docs.vanillaforums.com/api/roles/">Endpoint: roles</a>
    </li>
    
    
	    


    <li  class="active">
        <a href="//docs.vanillaforums.com/api/analytics/">Endpoint: analytics</a>
    </li>
    
    
        
        
        
        
    
	    


    <li  class="">
        <a href="//docs.vanillaforums.com/api/multisites/">Endpoint: multisites</a>
    </li>
    
    
	    



        </ul>
        
    </div>
</aside>
        </div>

        <div id="content" class="column column-9">

            

                

<p><em>This is preliminary documentation.</em></p>

<h2 id="analytics-leaderboard">/analytics/leaderboard</h2>

<pre><code class="language-http">POST /api/v1/analytics/leaderboard.ext HTTP/1.1
Host: https://yoursite.vanillaforums.com
</code></pre>

<p>Retrieve data for a site leaderboard.</p>

<p><a href="../#making-api-calls"><strong>Authentication</strong></a>: required</p>

<h3 id="parameters">Parameters</h3>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><strong><code>Board</code></strong></td>
<td><code>string</code></td>
<td><a href="#leaderboards">Type of leaderboard</a>.</td>
</tr>

<tr>
<td><code>Start</code></td>
<td><code>string</code></td>
<td>Start of the time range (ISO 8601).</td>
</tr>

<tr>
<td><code>End</code></td>
<td><code>string</code></td>
<td>End of the time range (ISO 8601).</td>
</tr>

<tr>
<td><code>Limit</code></td>
<td><code>integer</code></td>
<td>Maximum number of rows to return. Default: 10.</td>
</tr>

<tr>
<td><code>Filters</code></td>
<td><code>array</code></td>
<td><a href="#filters">Event property filters</a></td>
</tr>

<tr>
<td><code>Previous</code></td>
<td><code>bool</code></td>
<td>Whether or not to include the previous timeframe. Including the previous time</td>
</tr>
</tbody>
</table>

<h3 id="leaderboards">Leaderboards</h3>

<p>Leaderboards are specified by the <code>Board</code> parameter.  The following are valid values for that parameter:</p>

<ul>
<li><strong>top-posters</strong>: Users with most posts.</li>
<li><strong>top-discussion-starters</strong>: Users with most discussions.</li>
<li><strong>top-question-answerers</strong>: Users with most answers.</li>
<li><strong>top-best-answerers</strong>: Users with most accepted answers.</li>
<li><strong>top-member-by-total-reputation</strong>: Users by total reputation.</li>
<li><strong>top-positive-users</strong>: Users with the most positive reactions.</li>
<li><strong>top-member-by-accumulated-reputation</strong>: Users by accumulated reputation.</li>
<li><strong>top-viewed-discussions</strong>: Discussions with most views.</li>
<li><strong>top-commented-discussions</strong>: Discussions with most comments.</li>
<li><strong>top-positive-discussions</strong>: Discussions with most positive reactions.</li>
<li><strong>top-negative-discussions</strong>: Discussions with most negative reactions.</li>
<li><strong>top-viewed-qna-discussions</strong>: Questions with most views.</li>
</ul>

<h3 id="output">Output</h3>

<p>The following is output from an example request for a user leaderboard.  It assumes a <code>Limit</code> of three.  The record property contains user row data, because this was a user leaderboard.  If it had been a discussion leaderboard request, the property would contain details about a discussion.</p>

<p>The record property has been pruned for this example.</p>

<pre><code class="language-json">{
  &quot;result&quot;: [
    {
      &quot;record&quot;: {
        &quot;userID&quot;: 344,
        &quot;name&quot;: &quot;userOne&quot;,
        &quot;url&quot;: &quot;https://example.com/profile/userOne&quot;
        ...
      },
      &quot;value&quot;: 737,
      &quot;position&quot;: 1,
      &quot;previous&quot;: 9
    },
    {
      &quot;record&quot;: {
        &quot;userID&quot;: 127,
        &quot;name&quot;: &quot;userTwo&quot;,
        &quot;url&quot;: &quot;https://example.com/profile/userTwo&quot;
        ...
      },
      &quot;value&quot;: 679,
      &quot;position&quot;: 2,
      &quot;previous&quot;: 5
    },
    {
      &quot;record&quot;: {
        &quot;userID&quot;: 449,
        &quot;name&quot;: &quot;userThree&quot;,
        &quot;link&quot;: &quot;https://example.com/profile/userThree&quot;
        ...
      },
      &quot;value&quot;: 460,
      &quot;position&quot;: 3,
      &quot;previous&quot;: 1
    }
  ]
}
</code></pre>

<h2 id="analytics-query">/analytics/query</h2>

<pre><code class="language-http">POST /api/v1/analytics/query.ext HTTP/1.1
Host: https://yoursite.vanillaforums.com
</code></pre>

<p>Perform a query against collected analytics data.</p>

<p><a href="../#making-api-calls"><strong>Authentication</strong></a>: required</p>

<p>The body of the request must be a JSON-encoded object.  Each property of the object should be a supported parameter.</p>

<h3 id="parameters-1">Parameters</h3>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><strong><code>AnalysisType</code></strong></td>
<td><code>string</code></td>
<td><a href="#analysis-types">Type of analysis to perform</a></td>
</tr>

<tr>
<td><strong><code>EventCollection</code></strong></td>
<td><code>string</code></td>
<td><a href="#event-collections">Collection of events</a></td>
</tr>

<tr>
<td><strong><code>Timeframe</code></strong></td>
<td><code>array</code></td>
<td><a href="#timeframe">Range of time to target</a></td>
</tr>

<tr>
<td><code>TargetProperty</code></td>
<td><code>string</code></td>
<td>An event property to perform the analysis on</td>
</tr>

<tr>
<td><code>Filters</code></td>
<td><code>array</code></td>
<td><a href="#filters">Event property filters</a></td>
</tr>

<tr>
<td><code>Interval</code></td>
<td><code>string</code></td>
<td><a href="#interval">Result interval</a></td>
</tr>
</tbody>
</table>

<h3 id="analysis-types">Analysis Types</h3>

<p>Analytics queries require an analysis type.  This type will dictate how the data is compiled in the response.</p>

<ul>
<li><strong>count</strong>: Count the total records.</li>
<li><strong>sum</strong>: Add up all values for a property.</li>
<li><strong>maximum</strong>: Get the maximum value for a property.</li>
<li><strong>count_unique</strong>: Count the total number of unique property values.</li>
<li><strong>median</strong>: Calculate the median value for a property.</li>
</ul>

<p>Most analysis types are performed on a specific event property, so they require the <code>TargetProperty</code> parameter to be specified. <strong>count</strong> does not require a <code>target_property</code> parameter.</p>

<h3 id="event-collections">Event Collections</h3>

<p>All events captured by Vanilla are grouped into one of the following categories.  The collection is specified by passing the <code>EventCollection</code> parameter to the analytics query.</p>

<h4 id="page">page</h4>

<p>Page views are captured in the <code>page</code> collection.  Any time a guest or registered user loads up a page, it is captured and filed into this collection.</p>

<p>Valid types for the page collection are:</p>

<ul>
<li><strong>discussion_view</strong></li>
<li><strong>page_view</strong></li>
</ul>

<p>Commonly used properties for the page collection are:</p>

<ul>
<li><strong>user.userID</strong>: The ID of the user, if available.  If there is no current user, either because they aren&rsquo;t signed in or are a guest, this value will be <code>0</code>.</li>
</ul>

<h4 id="point">point</h4>

<p>Events involving actions affecting a user&rsquo;s points are stored in the <code>point</code> collection.  Both giving and removing points are recorded.</p>

<p>Valid types for the point collection are:</p>

<ul>
<li><strong>user_point_add</strong></li>
<li><strong>user_point_remove</strong></li>
</ul>

<p>Commonly used properties for the point collection are:</p>

<ul>
<li><strong>point.given.points</strong>: The total number of points granted or revoked in this event.</li>
</ul>

<h4 id="post">post</h4>

<p>When a discussion or comment is made, it is tracked in the <code>post</code> collection.  All posts are contained in this collection: comments, discussions, questions, ideas.  There are no restrictions on the type of post.</p>

<p>Valid types for the post collection are:</p>

<ul>
<li><strong>discussion_add</strong></li>
<li><strong>comment_add</strong></li>
</ul>

<p>Commonly used properties for the post collection are:</p>

<ul>
<li><strong>discussionType</strong>: The type of discussion related to this post.</li>
<li><strong>commentMetric.time</strong>: If the event was triggered by a comment, this property will be populated with the time, in seconds, between when the discussion and comment were added.</li>
<li><strong>commentMetric.firstComment</strong>: Will be true if this event was triggered by a comment and it was the first comment on the discussion.</li>
</ul>

<h4 id="post-modify">post_modify</h4>

<p>If a post is modified, the action is captured in the <code>post_modify</code> collection.  Similar to &ldquo;post&rdquo;, the type does not matter.  Two primary types of modification events are captured: edits and deletes.</p>

<p>Valid types for the post_modify collection are:</p>

<ul>
<li><strong>discussion_edit</strong></li>
<li><strong>discussion_delete</strong></li>
<li><strong>comment_add</strong></li>
<li><strong>comment_delete</strong></li>
</ul>

<h4 id="qna">qna</h4>

<p>The <code>qna</code> collection contains events specifically related to the Q&amp;A plug-in, such as answering a question.  Adding, editing or deleting a question would be recorded in the &ldquo;post&rdquo; collection.</p>

<p>Valid types for the qna collection are:</p>

<ul>
<li><strong>answer_accepted</strong></li>
</ul>

<h4 id="reaction">reaction</h4>

<p>When a user submits a reaction to a post, it is captured in <code>reaction</code>.  This includes adding and removing reactions.</p>

<p>Valid types for the reaction collection are:</p>

<ul>
<li><strong>reaction_add</strong></li>
<li><strong>reaction_delete</strong></li>
</ul>

<p>Commonly used properties for the reaction collection are:</p>

<ul>
<li><strong>reaction.reactionClass</strong>: The class of the reaction.  This is typically &ldquo;Positive&rdquo; or &ldquo;Negative&rdquo;.</li>
<li><strong>reaction.reactionType</strong>: The specific type of the reaction. (Ex. Like, Up, Down, Agree, etc)</li>
<li><strong>reaction.recordType</strong>: The type of post this reaction was performed on.  This is typically &ldquo;discussion&rdquo; or &ldquo;comment&rdquo;.</li>
</ul>

<h4 id="registration">registration</h4>

<p>Successful sign-ups on the forum are recorded in the <code>registration</code> collection.</p>

<p>Valid types for the registration collection are:</p>

<ul>
<li><strong>registration_success</strong></li>
</ul>

<h4 id="session">session</h4>

<p>Session events are captured in the <code>session</code> collection.  These events typically include when a user initiates sign-in, starting their session, and when they sign-out, ending their session.</p>

<p>Valid types for the session collection are:</p>

<ul>
<li><strong>session_start</strong></li>
<li><strong>session_end</strong></li>
</ul>

<h3 id="filters">Filters</h3>

<p>Data queried from analytics can be filtered by collection and event properties.  The most common type of filtering would be based on the <code>type</code> property.  For example, if you wanted to see new discussions, you&rsquo;d query the <code>post</code> collection and set a filter on the <code>type</code> property being equal to &ldquo;discussion_add&rdquo;.  The available types for the various collections are documented in their individual sections.  In addition to <code>type</code>, some additional commonly-used filtering properties are included in those sections, if available.</p>

<p>Each element in the <code>Filters</code> array should be an object with two properties: <code>propertyName</code> and <code>propertyValue</code>.  An optional property, <code>operator</code>, can be specified.  There are several comparison operators to choose from:</p>

<ul>
<li><strong>eq</strong>: Equal</li>
<li><strong>ne</strong>: Not equal</li>
<li><strong>gt</strong>: Greater than</li>
<li><strong>gte</strong>: Greater than or equal to</li>
<li><strong>lt</strong>: Less than</li>
<li><strong>lte</strong>: Less than or equal to</li>
<li><strong>in</strong>: Verify a property&rsquo;s value is in an array</li>
</ul>

<p>If <code>operator</code> is not specified, it is assumed to be &ldquo;eq&rdquo;</p>

<p>For example, when querying the post collection, you could apply a set of filters that only queried the first answers to a question with the following:</p>

<pre><code class="language-json">&quot;Filters&quot;: [
  {
    &quot;propertyName&quot;: &quot;type&quot;,
    &quot;propertyValue&quot;: &quot;comment_add&quot;
  },
  {
    &quot;propertyName&quot;: &quot;discussionType&quot;,
    &quot;propertyValue&quot;: &quot;Question&quot;
  },
  {
    &quot;propertyName&quot;: &quot;commentMetric.firstComment&quot;,
    &quot;propertyValue&quot;: &quot;1&quot;
  }
]
</code></pre>

<h3 id="timeframe">Timeframe</h3>

<p>Timeframes should be specified as an object with two properties: <code>start</code> and <code>end</code>.  These values should be ISO 8601 datetime strings (e.g. 2016-12-01T00:00:00.000Z).</p>

<pre><code class="language-json">&quot;Timeframe&quot;: {
  &quot;start&quot;: &quot;2016-12-01T00:00:00.000Z&quot;,
  &quot;end&quot;: &quot;2016-12-31T00:00:00.000Z&quot;
}
</code></pre>

<h3 id="interval">Interval</h3>

<p>An optional <code>interval</code> parameter may be specified in an analytics query.  If a valid <code>interval</code> is specified, the results are broken down into the specified increments over the timeframe.</p>

<p>The valid values for interval are:</p>

<ul>
<li><strong>hourly</strong></li>
<li><strong>daily</strong></li>
<li><strong>weekly</strong></li>
<li><strong>monthly</strong></li>
</ul>

<h3 id="output-1">Output</h3>

<p>Depending on whether or not an <code>interval</code> parameter was specified, the result may be in two different formats.</p>

<p>Without an <code>interval</code> parameter, a single value is returned: <code>result</code>.</p>

<pre><code class="language-json">{&quot;result&quot;: 1370}
</code></pre>

<p>If an <code>interval</code> value was provided, the <code>result</code> value will be an array.  Each interval will be returned as an object in that array.  The interval&rsquo;s subset of the overall timeframe will be specified as the <code>timeframe</code> property.  A <code>value</code> property will indicate the query result for the specified subset.</p>

<pre><code class="language-json">{
  &quot;result&quot;: [
    {
      &quot;value&quot;: 458,
      &quot;timeframe&quot;: {
        &quot;start&quot;: &quot;2016-12-01T00:00:00.000Z&quot;,
        &quot;end&quot;: &quot;2016-12-02T00:00:00.000Z&quot;
      }
    },
    {
      &quot;value&quot;: 431,
      &quot;timeframe&quot;: {
        &quot;start&quot;: &quot;2016-12-02T00:00:00.000Z&quot;,
        &quot;end&quot;: &quot;2016-12-03T00:00:00.000Z&quot;
      }
    },
    {
      &quot;value&quot;: 481,
      &quot;timeframe&quot;: {
        &quot;start&quot;: &quot;2016-12-03T00:00:00.000Z&quot;,
        &quot;end&quot;: &quot;2016-12-04T00:00:00.000Z&quot;
      }
    }
  ]
}
</code></pre>


            
            
        </div>
    </div>
</div>

        
        <div class="docs-platform">
    
    <div class="row">
    
        <div class="column column-3"></div>
        <div class="column column-9">
            <div class="docs-platform-choice choice-cloud">
                
                <img src="//docs.vanillaforums.com/img/cloud-hosting.png" />
                <div class="choice-details">
                    <h3>Cloud Hosting</h3>
                    <p>
                        We believe that online communities should be intuitive, engaging and true to your brand.
                    </p>
                </div>
                <a href="https://vanillaforums.com" class="docs-button button-outline">Learn more</a>
                
            </div>
        </div>

    </div>
    
</div>
        
        <footer class="docs-footer">
    
    <div class="row">
        
        <div class="column column-6">
            <div class="docs-copyright">
    Copyright &copy 2009-2017 Vanilla Forums, Inc. All rights reserved.
</div>
        </div>
        
        <div class="column column-6">
            <div class="docs-links">
    <a class="docs-links-item item-docs" href="http://docs.vanillaforums.com">Documentation</a>
    <a class="docs-links-item item-blog" href="https://blog.vanillaforums.com">Blog</a>
    <a class="docs-links-item item-cloud" href="https://vanillaforums.com">Cloud</a>
    <a class="docs-links-item item-community" href="https://vanillaforums.org/discussions">Community</a>
    <a class="docs-links-item item-api" href="http://docs.vanillaforums.com/api">API</a>
    <a class="docs-links-item item-github" href="https://github.com/vanilla/vanilla">GitHub</a>
    <a class="docs-links-item item-issues" href="https://github.com/vanilla/vanilla/issues">Issues</a>
</div>
        </div>
        
    </div>
</footer>
        
    </body>
    
</html>
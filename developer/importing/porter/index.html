<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Vanilla Forums, create an online community that your customers will love">
        <meta name="author" content="Vanilla Community">

        <title>Vanilla Forums Documentation</title>

        <link href="//docs.vanillaforums.com/css/docs.css" rel="stylesheet">
        <link href="//docs.vanillaforums.com/css/fonts/fontawesome/css/font-awesome.min.css" rel="stylesheet">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/default.min.css">

        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <script src="//docs.vanillaforums.com/js/vendor/jquery-3.0.0.min.js"></script>
        <script src="//docs.vanillaforums.com/js/vendor/jquery.store.js"></script>
        <script src="//docs.vanillaforums.com/js/lunr-index.json" id="search-manifest" type="application/json"></script>
        <script src="//docs.vanillaforums.com/js/vendor/lunr.js"></script>
        <script src="//docs.vanillaforums.com/js/search.js"></script>

        <link rel="shortcut icon" href="//docs.vanillaforums.com/favicon.ico" type="image/x-icon" />
        <link rel="apple-touch-icon" href="//docs.vanillaforums.com/apple-touch-icon.png" />
        <style type="text/css">
            .callout {
                table-layout: fixed;
            }
        </style>

        
<script type="text/javascript">
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-12713112-1', 'auto');
    ga('require', 'displayfeatures');
    ga('send', 'pageview');
</script>

<script type="text/javascript">
    (function(d, s, i, r) {
        if (d.getElementById(i)) {
            return;
        }
        var n = d.createElement(s), e = d.getElementsByTagName(s)[0];
n.id = i;
        n.src = '//js.hs-analytics.net/analytics/' + (Math.ceil(new Date() / r) * r) + '/95135.js';
        e.parentNode.insertBefore(n, e);
    })(document, "script", "hs-analytics", 300000);
</script>

    </head>

    <body class="docs grid docs-layout-single docs-layout-section-developer">

        <header class="docs-header">
    
    <div class="row">

        <div class="column column-4">
            
            <a class="vertical-group docs-header-logo" href="//docs.vanillaforums.com/">
                <img class="logo" src="//docs.vanillaforums.com/img/logo.svg" alt="Vanilla Forums" width="102" height="41" />
                <span class="docs-docs-tag">Docs</span>
            </a>
            
        </div>
        
        <div class="column column-8">
            <div class="vertical-group docs-header-tray">
                <div class="docs-header-search js-search">
    <div class="docs-search-wrap">
        <i class="fa fa-search" ></i>
        <input class="docs-search js-search-input" id="docs-search" />
    </div>
    <ul class="docs-search-results js-search-results">
        <a>
            <li>
                <span class="title"></span>
                <span class="tags"></span>
            </li>
        </a>
    </ul>
</div>
                <div class="docs-cta">
    <a href="http://pages.vanillaforums.com/demo-request-vanilla-forums?utm_source=vanilladocs&utm_medium=cta&utm_campaign=demo-request" class="docs-button button-primary button-small">Request a Demo</a>
</div>
            </div>
        </div>

    </div>

</header>

        <div class="docs-title-wrapper">
            <div class="row">
                <div class="column column-3"></div>
                <div id="title" class="column column-9">
                    <div class="docs-title">
    <h1>Vanilla Porter</h1>
    
    <div class="docs-page docs-improve">
          <a href="https://github.com/vanilla/docs/edit/master/content/developer/importing/porter.md"><i class="fa fa-pencil"></i>Improve this document</a>
    </div>
    
</div>
                </div>
            </div>
        </div>


<div class="docs-content">
    <div class="row">
        <div id="nav" class="column column-3">
            <aside id="sidebar">
    <div class="docs-nav nav-collapse">
        
        <ul class="sidebar-menu nav-tier1">




    <li  class=" nest">
        <a href="//docs.vanillaforums.com/developer/backend/">Backend</a>
    </li>
    
    
	    


    <li  class="">
        <a href="//docs.vanillaforums.com/developer/changelog/">Change Log</a>
    </li>
    
    
	    


    <li  class="">
        <a href="//docs.vanillaforums.com/developer/community/">Community</a>
    </li>
    
    
	    


    <li  class=" nest">
        <a href="//docs.vanillaforums.com/developer/configuration/">Configuration</a>
    </li>
    
    
	    


    <li  class=" nest">
        <a href="//docs.vanillaforums.com/developer/contributing/">Contributing</a>
    </li>
    
    
	    


    <li  class="">
        <a href="//docs.vanillaforums.com/developer/data-privacy/">Data privacy</a>
    </li>
    
    
	    


    <li  class="">
        <a href="//docs.vanillaforums.com/developer/tools/">Developer Tools</a>
    </li>
    
    
	    


    <li  class="">
        <a href="//docs.vanillaforums.com/developer/tools/environment/">Environment Setup</a>
    </li>
    
    
	    


    <li  class="active nest">
        <a href="//docs.vanillaforums.com/developer/importing/">Importing</a>
    </li>
    
    
        
        
        
        
            <ul class="nav-tier2">
	    
                <li class="">
                    <a href="//docs.vanillaforums.com/developer/importing/build/">Building new porters </a>
                </li>
                
                

	    
	    
                <li class="">
                    <a href="//docs.vanillaforums.com/developer/importing/support/">Supported platforms </a>
                </li>
                
                

	    
	    
                <li class="active">
                    <a href="//docs.vanillaforums.com/developer/importing/porter/">Vanilla Porter </a>
                </li>
                
                
                    
                    
               
                    
                

	    </ul>
        
    
	    


    <li  class="">
        <a href="//docs.vanillaforums.com/developer/installation/">Installation</a>
    </li>
    
    
	    


    <li  class="">
        <a href="//docs.vanillaforums.com/developer/locales/">Locales</a>
    </li>
    
    
	    


    <li  class=" nest">
        <a href="//docs.vanillaforums.com/developer/plugins/">Plugins</a>
    </li>
    
    
	    


    <li  class="">
        <a href="//docs.vanillaforums.com/developer/routes/">Routes</a>
    </li>
    
    
	    


    <li  class="">
        <a href="//docs.vanillaforums.com/developer/schemas/">Schemas</a>
    </li>
    
    
	    


    <li  class=" nest">
        <a href="//docs.vanillaforums.com/developer/theming/">Theming</a>
    </li>
    
    
	    


    <li  class="">
        <a href="//docs.vanillaforums.com/developer/troubleshooting/">Troubleshooting</a>
    </li>
    
    
	    


    <li  class="">
        <a href="//docs.vanillaforums.com/api/">Vanilla API</a>
    </li>
    
    
	    


    <li  class=" nest">
        <a href="//docs.vanillaforums.com/developer/framework/">Framework</a>
    </li>
    
    
	    


    <li  class="">
        <a href="//docs.vanillaforums.com/developer/embedding/">Embedding</a>
    </li>
    
    
	    



        </ul>
        
    </div>
</aside>
        </div>

        <div id="content" class="column column-9">

            

                

<h2 id="migrating-a-forum-to-vanilla">Migrating a forum to Vanilla</h2>

<p>Vanilla Porter is the <a href="https://open.vanillaforums.com/addon/porter-core">export tool</a>  for converting your legacy forum to Vanilla. The process is four steps:</p>

<ol>
<li>Export your old forum data to a special &ldquo;Porter file&rdquo;.</li>
<li>Create a new Vanilla forum.</li>
<li>Import the Porter file in Vanilla&rsquo;s Dashboard.</li>
<li>Verify &amp; finalize your new forum.</li>
</ol>

<p>Vanilla Porter <strong>requires</strong> a MySQL database and PHP 5.3+ with zlib support enabled.</p>

<h3 id="before-migrating">Before migrating</h3>

<p>We recommend these best practices:</p>

<ol>
<li><p><strong>Inform your community</strong> well in advance about the coming transition. Introduce them to Vanilla and communicate why you are migrating and when.</p></li>

<li><p>If possible, <strong>allow moderators time to use Vanilla</strong> and ask questions before migrating.</p></li>

<li><p>Do one or more <strong>test runs</strong> to work out any issues and familiarize yourself with the process.</p></li>

<li><p><strong>Prepare &amp; <a href="#redirects">test redirects</a></strong> from your old forum&rsquo;s content to its new location. This is important for search engine traffic, preserving links between discussions, and browser bookmarks. More information about this is below under <strong><a href="#special-steps-notes">Special Steps &amp; Notes</a></strong>.</p></li>
</ol>

<p>Doing these things will help your members, moderators, and yourself have a better migration experience and set good expectations for everyone.</p>

<p>All set? OK, let&rsquo;s jump in.</p>

<h3 id="1-export-old-forum-data">1. Export old forum data</h3>

<p>Vanlla Porter exports from a database to a special &ldquo;Porter file&rdquo; format that Vanilla can import. We currently support <a href="//docs.vanillaforums.com/developer/importing/support">these platforms</a>.</p>

<p>If you have a very large forum (millions of posts), see the <strong>Special Steps &amp; Notes</strong> below before beginning.</p>

<p>To use it:</p>

<ol>
<li><p><strong>Grab</strong> the <a href="https://open.vanillaforums.com/addon/porter-core">export tool</a> and unzip it. It will be a single file named <code>vanilla2export.php</code>.</p></li>

<li><p><strong>Upload</strong> the file to <em>writable</em> web directory on the server with your legacy database. Most forums have a <code>files</code> or <code>uploads</code> directory which is an easy place to put it.</p></li>

<li><p><strong>Browse</strong> to vanilla2export.php in your web browser. You should see a &ldquo;Vanilla Porter&rdquo; web page.</p></li>

<li><p><em>If this is the final export, now is the time to put your legacy forum into read-only mode to prevent posts from being lost during the migration.</em></p></li>

<li><p><strong>Enter</strong> information about your forum database into the form and click <strong>Begin Export</strong>. If you can’t remember, try looking at your forum’s configuration file.</p></li>

<li><p><strong>Download</strong> the Porter file it generates</p></li>
</ol>

<p>Got problems? See the <strong>Troubleshooting</strong> section below.</p>

<h3 id="2-create-a-new-vanilla-forum">2. Create a new Vanilla forum</h3>

<p>In order to import your data, you will need a fresh installation of <a href="https://open.vanillaforums.com/addon/vanilla-core">Vanilla</a>. When you do the import, all data in your fresh installation will be overwritten, so make sure you don’t have any discussions you want to keep there. See the README file for help.</p>

<h3 id="3-import-your-data">3. Import your data</h3>

<ol>
<li><p>Place your Porter file (that the export created) in Vanilla&rsquo;s <code>uploads</code> folder.</p></li>

<li><p>In Vanilla, click <strong>Import</strong> in the Dashboard.</p></li>

<li><p>Select the file you uploaded. Enter the email of the user from your legacy forum you want to be the superadmin of the new forum. Check &ldquo;Use my current password&rdquo;. Leave the password box empty.</p></li>

<li><p>Click <strong>Start Import</strong>.</p></li>

<li><p>The import runs a while depending on how much data you have. If it&rsquo;s more than a million posts, you can make a cup of tea and check Twitter.</p></li>

<li><p>Click <strong>Finish</strong> to cleanup and finalize the import.</p></li>
</ol>

<p>Welcome to Vanilla! Notice you are now logged in as the username you entered. The password is the one you created your Vanilla forum with. Below are some more things you should do to get your new forum ready.</p>

<h3 id="4-verifying-finalizing-the-import">4. Verifying &amp; finalizing the import</h3>

<p>These are things to do after your Vanilla import. This includes manually visiting a few &ldquo;hidden&rdquo; Dashboard pages just for this process.</p>

<ol>
<li><p><strong>Database Update:</strong> Visit the URL <code>/utility/update</code> to make any database changes needed. An import can overwrite changes your addons made, so they will be re-applied by this.</p></li>

<li><p><strong>Counters Update:</strong> Visit the URL <code>/dba/counts</code> to run &ldquo;counter&rdquo; updates of things like the number of discussions per category.</p></li>

<li><p><strong>Users:</strong> View your Users page in the Dashboard to verify users were imported correctly and are all assigned to a role.</p></li>

<li><p><strong>Roles &amp; Permissions:</strong> Many imports reset permissions. It is very import you edit each role in turn to review and correct them.</p></li>

<li><p><strong>Default Roles:</strong> Visit the URL <code>/role/defaultroles</code> to make sure your visitor, default, and applicant roles are assigned correctly.</p></li>

<li><p><strong>Better BBCode:</strong> If you&rsquo;re coming from a forum that uses BBCode, we recommend grabbing the NBBC plugin from the <a href="https://github.com/vanilla/addons">Addons repository</a> for improved support.</p></li>

<li><p><strong>Verify Content:</strong> Go thru your discussions and categories to make sure your content is complete, ungarbled, and organized correctly.</p></li>

<li><p><strong>Enable &amp; Verify Redirects:</strong> Turn on your 301 redirects to Vanilla. Test old discussion, category, and user profile URLs to make sure you have set up your redirects correctly. See the <strong>Redirects</strong> section below for more info.</p></li>
</ol>

<h2 id="special-steps-notes">Special Steps &amp; Notes</h2>

<p>This part contains nauseating levels of detail about aspects of migrating that hopefully you don&rsquo;t need to deal with. You&rsquo;ll get referred here from elsewhere in the docs if you need it.</p>

<h4 id="large-forums">Large forums</h4>

<p>Forums with over 1 million posts may take a long time to migrate on low-budget hosting plans and cause intense resource usage or downtime while it runs. Forums with over 10 million posts make take a very long time &amp; cause strain on <em>any</em> hosting plan.</p>

<p>For advanced users in these circumstances, copy your database to a localhost installation and run the Porter via the command line. See the <a href="https://github.com/vanilla/porter">Vanilla Porter repository and README</a> for more information. We likewise recommend importing to a localhost copy of Vanilla and running your verification &amp; finalization steps locally, and repeating the <strong>Default Roles</strong> step after copying the database to production.</p>

<h4 id="attachments">Attachments</h4>

<p>File attachments and avatars may be stored in the file system or as binary blobs in the database depending on your platform and configuration. If they are stored in the file system (most common), copy the entire folder directly into Vanilla&rsquo;s <code>uploads</code> folder.</p>

<p>The Porter can export binary blobs for vBulletin. When navigating to the <code>vanilla2export.php</code> file, add <code>?avatars=1&amp;files=1</code> to the URL. This will create folders for <code>attachments</code> and <code>customavatars</code> that should each be directly copied to Vanilla&rsquo;s <code>uploads</code> folder.</p>

<p>To rename vBulletin&rsquo;s attachments to have correct extensions, use <code>filepath=/path/to/attachments</code> in the URL to process them. Renaming phpBB&rsquo;s attachments requires the special <code>utilities/phpbb.extensions.php</code> file in the repository. These are currently advanced user tools and may require consulting the inline documentation in the appropriate package file. If you get stuck, ask on the <a href="https://open.vanillaforums.com">community forum</a>.</p>

<h4 id="non-mysql-data">Non-MySQL data</h4>

<p>Data in non-MySQL formats (MSSQL, PostgreSQL, XML, CSV, JSON) should first be converted to a MySQL database before using Vanilla Porter or attempting to create a Porter package. For flat file data, we recommend a table per file. Preserving existing column names is preferred whenever possible.</p>

<h4 id="passwords">Passwords</h4>

<p>Vanilla natively supports many legacy password schemes for other forums. This means users do not need to reset their password if you&rsquo;re coming from a platform we support (see the vanilla2export.php file for availability).</p>

<p>If you run into problems, your platform isn&rsquo;t supported, or want to reset them anyway, you can run this SQL query (via a tool like phpMyAdmin) to reset all passwords: <code>update GDN_User set HashMethod = 'Reset' where Admin &lt; 1;</code> (the <code>where</code> clause there prevents resetting your superadmin password). This does not trigger any notification emails; users will be alerted they must reset their password on their next login attempt.</p>

<h4 id="redirects">Redirects</h4>

<p>For everything to work properly you will probably need to do two redirects:
one for the <a href="#redirect-the-path">path</a> and one for the <a href="#redirect-the-domain">domain</a>.</p>

<p>When setup properly, users visiting your old forum should be globally redirected to your new Vanilla Forums domain.
Once the user arrives at the new forum, a second redirect will translate the request and forward users to the proper Vanilla URL.</p>

<h5 id="redirect-the-path">Redirect the path</h5>

<p>The &ldquo;path&rdquo; is everything that comes after the domain.
In <code>http://domain.com/forum/thread.php?id=10&amp;pageNumber=2</code> that would be <code>/forum/thread.php?id=10&amp;pageNumber=2</code></p>

<p>Many legacy platform path redirects can be handled by the <strong>Redirector</strong> plugin in the <a href="https://github.com/vanilla/addons">Addons repository</a>.
Simply enable the plugin. Check the description for what it supports currently.</p>

<p>You may also create custom redirects, as needed, using the <a href="//docs.vanillaforums.com/developer/routes">Routes</a> feature in the Dashboard.
Regular expressions can be used to perform pattern matching against incoming paths which will allow you to 301 redirects to the new paths.</p>

<p>An example of a path redirect would be:
<code>/forum/discussion.php?id=10&amp;pageNumber=2</code>
being redirected to
<code>/discussion/10?page=2</code>
which is the correct path for the discussion number 10 on page 2.</p>

<h5 id="what-paths-should-be-redirected">What paths should be redirected?</h5>

<p>It depends greatly on your old forum but here is a list of what <em>should</em> be redirected
- Categories / Forums
- Discussions / Threads
- Comments / Replies
- User profiles</p>

<p>To summarize, all public pages <strong>with relevant content</strong> that were ported to Vanilla <em>should</em> be redirected.</p>

<h5 id="testing-the-redirects">Testing the redirects</h5>

<p>Once you setup the paths redirects you should test them thoroughly to make sure that everything works fine.
To test you can simple copy an URL from your old forum to the new one.</p>

<p>Example:
If your new forum resides on a different domain you will need to change the domain name like so
<code>http://olddomain.com/forum/discussion.php?id=10&amp;page=2</code> to <code>http://newdomain.com/forum/discussion.php?id=10&amp;page=2</code>
This should result in <code>http://newdomain.com/forum/discussion.php?id=10&amp;page=2</code> being redirected to <code>http://newdomain.com/discussion/10?page=2</code>.</p>

<p><em>Note</em>: For the pages to work properly you need to configure Vanilla to have the same number of comments per page as your old forum had.</p>

<h5 id="redirect-the-domain">Redirect the domain</h5>

<p>If the domain where your new forum resides is different than where your old forum was you will need to redirect the domain.
Let&rsquo;s say that your old domain is olddomain.com and your new domain is newdomain.com (original right?):</p>

<p><code>http://olddomain.com/...</code> should redirect to <code>http://newdomain.com/...</code></p>

<p>It would be the same principle if you were to move your forum on a subdomain:</p>

<p><code>http://domain.com/...</code> would need to be redirected to <code>http://forumsubdomain.domain.com/...</code></p>

<p>To help set this up you you can use the <code>forum-redirector</code> folder in the <a href="https://github.com/vanilla/addons">Addons repository</a>.
*Do not confound the <strong>Redirector</strong> plugin with the <code>forum-redirector</code> folder.*</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<h4 id="common-problems-using-porter">Common problems using Porter</h4>

<ol>
<li>Not placing the file <code>vanilla2export.php</code> in a web-enabled folder accessible from the Internet.</li>
<li>Not placing the file <code>vanilla2export.php</code> in a folder that the web server has permission to <em>write</em> to.</li>
<li>Attempting to export from an MSSQL database. You must first convert to MySQL. Try the <a href="https://github.com/tburry/dbdump">dbdump tool</a>.</li>
<li>Attempting to export from a non-PHP server. Try setting up a tool like MAMP or WAMP on your computer and copying your database there instead.</li>
</ol>

<p>Still having trouble? Ask on the <a href="https://open.vanillaforums.com">community forum</a>.</p>

<h4 id="common-problems-while-importing">Common problems while importing</h4>

<ol>
<li>Entering a user email address that does not exist in the legacy forum.</li>
<li>Unzipping the generated porter file. Leave it zipped and <em>do not rename it</em>.</li>
<li>Not having <code>zlib</code> installed AND enabled in your PHP install. Confirm this with your host if the file cannot be read.</li>
<li>Not placing the generated porter file directly in the <code>uploads</code> folder.</li>
<li>Attempting to &lsquo;Browse&rsquo; for the file rather than selecting it with the multiple choice selector above that.</li>
</ol>

<p>Still having trouble? Ask on the <a href="https://open.vanillaforums.com">community forum</a>.</p>

<h4 id="data-missing">Data missing</h4>

<p>Review the support table included in the vanilla2export.php file (by browsing to it in a web browser and clicking the link) and verify that data is included in that platform.</p>

<p><strong>Is it supported?</strong> If so, ask on the <a href="https://open.vanillaforums.com">community forum</a>. If you can find the technical reason it didn&rsquo;t work, please file an <a href="https://github.com/vanilla/porter/issues">issue on the GitHub repository</a>.</p>

<p><strong>Not supported?</strong> You can request support be added on the GitHub repository. If you do this, <em>please be prepared to supply a copy of your forum database</em> as a sample. For password support, first create a new user with a password you can share for testing purposes.</p>

<p>We do accept pull requests for new package support if you create it. Please see the <strong>Contributing</strong> section of the <a href="https://github.com/vanilla/porter">Vanilla Porter README</a>.</p>

<h4 id="users-cannot-login">Users cannot login</h4>

<p>See the <strong>Passwords</strong> section under <strong>Special Steps &amp; Notes</strong> above. Use the query there to reset all passwords if necessary.</p>

<h4 id="porter-file-seems-too-small">Porter file seems too small</h4>

<p>A great deal of data in legacy forums is unneeded, and porter files are compressed significantly. Be sure to do a test import and verify its content before assuming it&rsquo;s not there. The Vanilla Porter export log will give details on what data has been exported (and how much of each type of data).</p>

<h4 id="my-legacy-forum-isn-t-supported">My legacy forum isn&rsquo;t supported</h4>

<p>Weirdo. Just kidding! You can request support (see <strong>Data Missing - Not Supported?</strong> above) or roll your own porter package (see the <a href="https://github.com/vanilla/porter">repository</a>).</p>


            
            
        </div>
    </div>
</div>

        
        <div class="docs-platform">
    
    <div class="row">
    
        <div class="column column-3"></div>
        <div class="column column-9">
            <div class="docs-platform-choice choice-cloud">
                
                <img src="//docs.vanillaforums.com/img/cloud-hosting.png" />
                <div class="choice-details">
                    <h3>Cloud Hosting</h3>
                    <p>
                        We believe that online communities should be intuitive, engaging and true to your brand.
                    </p>
                </div>
                <a href="https://vanillaforums.com" class="docs-button button-outline">Learn more</a>
                
            </div>
        </div>

    </div>
    
</div>
        
        <footer class="docs-footer">
    
    <div class="row">
        
        <div class="column column-6">
            <div class="docs-copyright">
    Copyright &copy 2009-2017 Vanilla Forums, Inc. All rights reserved.
</div>
        </div>
        
        <div class="column column-6">
            <div class="docs-links">
    <a class="docs-links-item item-docs" href="http://docs.vanillaforums.com">Documentation</a>
    <a class="docs-links-item item-blog" href="https://blog.vanillaforums.com">Blog</a>
    <a class="docs-links-item item-cloud" href="https://vanillaforums.com">Cloud</a>
    <a class="docs-links-item item-community" href="https://vanillaforums.org/discussions">Community</a>
    <a class="docs-links-item item-api" href="http://docs.vanillaforums.com/api">API</a>
    <a class="docs-links-item item-github" href="https://github.com/vanilla/vanilla">GitHub</a>
    <a class="docs-links-item item-issues" href="https://github.com/vanilla/vanilla/issues">Issues</a>
</div>
        </div>
        
    </div>
</footer>
        
    </body>
    
</html>
<div class="docs-header">
    
    <div class="docs-header-logo">
        <a href="/">
            <img class="logo" src="/img/logo.svg" alt="Vanilla Forums" width="102" height="41" /> Docs
        </a>
    </div>
    
    <div class="docs-header-cta">
        <a href="http://pages.vanillaforums.com/free-trial-of-vanilla-forums" class="Button Primary Small">Free trial</a>
    </div>
    
    <div class="docs-header-search">
    Search
</div>
    
</div>


<div class="docs-title">
    <h1 class="docs-page-title">Controllers &amp; URLs</h1>
    <div class="docs-page docs-improve">
        <i class="fa fa-pencil">Improve this document</i>
    </div>
</div>


<h2 id="controllers">Controllers</h2>

<p>In our MVC context, controllers are the traffic cops. They receive a parsed request (typically the URL in the address bar), build some data using models, and send it back to the browser in a view.</p>

<h3 id="dispatcher">Dispatcher</h3>

<p>Vanilla maps URLs to controllers in a fairly direct way. The Dispatcher (<code>Gdn_Dispatcher</code>) receives incoming <a href="/developers/framework/requests">requests</a> and invokes the appropriate controller(s).</p>

<h3 id="mapping-urls">Mapping URLs</h3>

<p>First it looks for an application name, then a controller name, then a method name, then any arguments which will be passed in the order given.</p>

<p>An example that includes all of these is: <code>/dashboard/profile/notifications/1/Lincoln</code>. This calls the Dashboard&rsquo;s <code>ProfileController</code> invoking the <code>Notifications</code> method, which it passes the arguments <code>1</code> and <code>Lincoln</code>, in that order. It roughly translates to:</p>

<pre><code>$ProfileController = new ProfileController();
$ProfileController-&gt;notifications('1', 'Lincoln');
</code></pre>

<p>If the application is omitted, it will automatically search enabled applications for a suitably named controller. Therefore, avoid controller name overlap. If the method name is omitted, the <code>Index()</code> method will be invoked. Therefore, the basic profile URL <code>/profile/1/Lincoln</code> could be more verbosely written as <code>/dashboard/profile/index/1/Lincoln</code> to more clearly understand what code it is invoking.</p>

<h3 id="pretty-urls">Pretty URLs</h3>

<p>All requests are dispatched thru the index.php file. While it&rsquo;s possible to use the framework by passing a &lsquo;p&rsquo; parameter with the rest of the path (e.g. <code>/index.php?p=/profile</code>), it&rsquo;s best to configure your server to handle &ldquo;pretty&rdquo; URLs.</p>

<p>On Apache, this is accomplished with the <code>.htaccess</code> file provided with Vanilla that contains these rewrite rules:</p>

<pre><code>RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php\?p=$1 [QSA,L]
</code></pre>

<p>Consult the <a href="/developers/community">community</a> if you need assistance configuring another server platform such as nginx or IIS.</p>

<p>Vanilla will attempt to detect whether your system can handle pretty URLs during installation. If it sets it incorrectly, the <a href="/developers/configuration">config</a> setting to enable pretty URLs is:</p>

<pre><code>$Configuration['Garden']['RewriteUrls'] = TRUE;
</code></pre>

<p>The ability to use non-pretty URLs may be deprecated in the future.</p>



<div class="docs-footer">
    <div class="docs-copyright">
        Copyright &copy 2009-2016 Vanilla Forums, Inc. All rights reserved.
    </div>
    <div class="docs-submenu">
        <ul>
            <li class="docs-submenu-item item-docs"><a href="http://docs.vanillaforums.com">Documentation</a></li>
            <li class="docs-submenu-item item-blog"><a href="https://blog.vanillaforums.com">Blog</a></li>
            <li class="docs-submenu-item item-cloud"><a href="https://vanillaforums.com">Cloud</a></li>
            <li class="docs-submenu-item item-community"><a href="https://vanillaforums.org/discussions">Community</a></li>
            <li class="docs-submenu-item item-github"><a href="https://github.com/vanilla/vanilla">GitHub</a></li>
            <li class="docs-submenu-item item-issues"><a href="https://github.com/vanilla/vanilla/issues">Issues</a></li>
        </ul>
    </div>
</div>
<div class="docs-header">
    
    <div class="docs-header-logo">
        <a href="/">
            <img class="logo" src="/img/logo.svg" alt="Vanilla Forums" width="102" height="41" /> Docs
        </a>
    </div>
    
    <div class="docs-header-cta">
        <a href="http://pages.vanillaforums.com/free-trial-of-vanilla-forums" class="Button Primary Small">Free trial</a>
    </div>
    
    <div class="docs-header-search">
    Search
</div>
    
</div>


<div class="docs-title">
    <h1 class="docs-page-title">Backend</h1>
    <div class="docs-page docs-improve">
        <i class="fa fa-pencil">Improve this document</i>
    </div>
</div>


<h1 id="backend-setup">Backend setup</h1>

<h2 id="server">Server</h2>

<p>Vanilla works with Apache, nginx (our preference) or IIS with proper configuration. The core team does not officially support IIS but accept bug reports and patches related to it.</p>

<h3 id="apache">Apache</h3>

<p>Vanilla includes an <code>.htaccess</code> file for out-of-box Apache support. You may need to edit the htaccess file as indicated for subfolder usage. Obviously, htaccess files must be enabled for your web root.</p>

<h3 id="nginx">nginx</h3>

<p>The key to specifically running Vanilla under nginx is getting the basic rewrite rule in <code>nginx.conf</code> correct. These are by no means complete conf files nor an nginx tutorial, these are simply excerpts of the Vanilla-specific rules needed.</p>

<p>An example of <strong>Vanilla 2.2 and earlier</strong> running in the root web folder:</p>

<pre><code>    location @site {
       rewrite ^ /index.php?p=$uri&amp;$args last;
    }

    location / {
       try_files $uri @site;
    }
</code></pre>

<p>An example of <strong>Vanilla 2.2 and earlier</strong> in a subfolder:</p>

<pre><code>    location /subfolder {
       try_files $uri @subfolder;
    }

    location @subfolder {
       rewrite ^/subfolder(/.*) /subfolder/index.php?p=$1&amp;$args last;
    }
</code></pre>

<p>In <strong>Vanilla 2.3</strong>, these rules change because the <code>p</code> parameter has been removed in favor of strict usage of <code>PATH_INFO</code>, and therefore no rewrite is needed. However, it&rsquo;s important that your fastcgi params are setup to pass this information to PHP.</p>

<h3 id="iis">IIS</h3>

<p>We do not officially support this server, but information and help may be provided on our <a href="https://vanillaforums.org/discussions">community forum</a>. We welcome additions to this documentation.</p>

<h2 id="caching">Caching</h2>

<h3 id="opcache">OPcache</h3>

<p>OPcache replaced APC as the preferred opcode caching solution for PHP as of 5.5. Vanilla is compatible with OPcache and no additional configuration is necessary beyond simply enabling it.</p>

<h3 id="memcached">Memcached</h3>

<p>Vanilla has support for both Memcache and Memcached, but we strongly recommend Memcached if you have an option. It does require additional configuration beyond installing and enabling it in PHP.</p>

<pre><code>$Configuration['Cache']['Enabled'] = true;
$Configuration['Cache']['Method'] = 'memcached';
$Configuration['memcached']['Store'] = 'localhost';
</code></pre>

<p>You can also specify a port for memcached. Store, e.g.: <code>localhost:11211</code>.</p>

<p>Lastly, you can optionally set Memcached options directly in your Vanilla config. Here are some example settings you may wish to use. Note that these require Memcached to be enabled on your server or else adding these to your config will cause errors.</p>

<pre><code>$Configuration['Cache.Memcached.Option.'.Memcached::OPT_COMPRESSION] = true;
$Configuration['Cache.Memcached.Option.'.Memcached::OPT_DISTRIBUTION] = Memcached::DISTRIBUTION_CONSISTENT;
$Configuration['Cache.Memcached.Option.'.Memcached::OPT_LIBKETAMA_COMPATIBLE] = true;
$Configuration['Cache.Memcached.Option.'.Memcached::OPT_NO_BLOCK] = true;
$Configuration['Cache.Memcached.Option.'.Memcached::OPT_TCP_NODELAY] = true;
$Configuration['Cache.Memcached.Option.'.Memcached::OPT_CONNECT_TIMEOUT] = 1000;
$Configuration['Cache.Memcached.Option.'.Memcached::OPT_SERVER_FAILURE_LIMIT] = 2;
</code></pre>



<div class="docs-footer">
    <div class="docs-copyright">
        Copyright &copy 2009-2016 Vanilla Forums, Inc. All rights reserved.
    </div>
    <div class="docs-submenu">
        <ul>
            <li class="docs-submenu-item item-docs"><a href="http://docs.vanillaforums.com">Documentation</a></li>
            <li class="docs-submenu-item item-blog"><a href="https://blog.vanillaforums.com">Blog</a></li>
            <li class="docs-submenu-item item-cloud"><a href="https://vanillaforums.com">Cloud</a></li>
            <li class="docs-submenu-item item-community"><a href="https://vanillaforums.org/discussions">Community</a></li>
            <li class="docs-submenu-item item-github"><a href="https://github.com/vanilla/vanilla">GitHub</a></li>
            <li class="docs-submenu-item item-issues"><a href="https://github.com/vanilla/vanilla/issues">Issues</a></li>
        </ul>
    </div>
</div>
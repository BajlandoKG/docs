<div class="docs-header">
    
    <div class="docs-header-logo">
        <a href="/">
            <img class="logo" src="/img/logo.svg" alt="Vanilla Forums" width="102" height="41" /> Docs
        </a>
    </div>
    
    <div class="docs-header-cta">
        <a href="http://pages.vanillaforums.com/free-trial-of-vanilla-forums" class="Button Primary Small">Free trial</a>
    </div>
    
    <div class="docs-header-search">
    Search
</div>
    
</div>


<div class="docs-title">
    <h1 class="docs-page-title">SSO with jsConnect</h1>
    <div class="docs-page docs-improve">
        <i class="fa fa-pencil">Improve this document</i>
    </div>
</div>


<h2 id="jsconnect-concepts-overview">jsConnect Concepts Overview</h2>

<p>Our SSO solution has a few basic assumptions:</p>

<ul>
<li>Your user is signed into a <strong>website</strong>.</li>
<li><strong>You</strong> control this website and can add files &amp; pages to it.</li>
</ul>

<p>The integration will be a lot easier and tighter if:</p>

<ul>
<li>You have unique, validated <strong>usernames</strong> for users.</li>
<li>You have confirmed, unique <strong>email addresses</strong> for users.</li>
</ul>

<h2 id="creating-mapping-users">Creating &amp; mapping users</h2>

<p>Data that can currently be passed over SSO with jsConnect:</p>

<ul>
<li>Unique ID from your system (<em>required</em>)</li>
<li>Email (<em>required</em>)</li>
<li>Username (<em>recommended</em>)</li>
<li>Photo URL</li>
<li>Roles (Vanilla&rsquo;s permissions management groups)</li>
</ul>

<p>When receiving an SSO response, Vanilla will do a lookup by <strong>email address</strong> against the forum database. If it finds a match and the user connects, a <strong>permanent mapping</strong> is made against the unique ID your provided. This means future email changes on your side do not effect the login process.</p>

<p>If no email match is found, a new forum account will be created instantly using the provided data. If no username is provided, the user will be prompted to create one.</p>

<p>Data is synced at every new login. For instance, providing a different email address on the user&rsquo;s fifth login will still log them into the same account, but will update their Vanilla email address.</p>

<p>The Photo URL is accepted only if the user has not uploaded their own avatar in the forum yet, and it is a valid URL. Imported avatars (if you migrated to Vanilla from another platform) count as the user having uploaded their own avatar.</p>

<p><strong>We strongly recommend against creating new users via the API.</strong> Our SSO solution lazy-creates new users for maximum robustness and reliability. Once a new user is created, you can optionally sync additional data about the user over API as needed.</p>

<h2 id="unified-user-experience">Unified user experience</h2>

<p>In Vanilla, these optional configuration changes are possible:</p>

<ul>
<li>Auto-connect to existing forum user accounts without prompting for a password (i.e. your SSO source is 100% trusted).</li>
<li>Disable all email sending in Vanilla.</li>
<li>Disable profile editing.</li>
<li>Redirect user profile links to another system.</li>
</ul>

<p>Cloud users can contact support to make these changes.</p>

<h2 id="how-it-connects">How it connects</h2>

<p>Clicking the &ldquo;Sign In&rdquo; button in Vanilla generates an asynchronous request <strong>in the user&rsquo;s browser session</strong> back to the main website. This means the user&rsquo;s cookies are sent as if they had visited the page directly, and that your normal login detection logic will work.</p>

<p><img src="/features/sso/images/jsconnect-overview.png" alt="" /></p>

<h2 id="two-flavors-of-sso">Two Flavors of SSO</h2>

<p>There are two implementations of SSO that jsConnect supports. You can implement either of the methods or both as they serve different purposes.</p>

<h3 id="method-1-site-wide-sso">Method 1: Site-Wide SSO</h3>

<p>You implement site-wide SSO when Vanilla is as a full site. With this method you need to create a page that provides your login information in jsonp format.</p>

<h3 id="method-2-embedded-sso">Method 2: Embedded SSO</h3>

<p>Vanilla also has the ability to be embedded in an html page either as an entire site or just as embedded comments. With this scenario you need to create a special SSO string that can be passed to the embedded Vanilla and provide login information.</p>

<h2 id="make-it-seamless">Make it seamless</h2>

<p>When setting up a jsConnect connection in full-site mode, you have the option to specify it as &ldquo;default&rdquo;. Doing this attaches it to the special <code>/sso</code> endpoint in Vanilla. When a user clicks &ldquo;Forum&rdquo; in your website&rsquo;s navigation, instead of linking to the forum homepage, instead link them to the <code>/sso</code> page. This will auto-fire the asynchronous call back to your website rather than waiting for the user to click &ldquo;sign in&rdquo;, then drops them on the homepage as normal.</p>

<p>For more information, read our <a href="/features/sso/jsconnect/overview">technical overview</a>.</p>

<h2 id="wordpress-plugin">WordPress plugin</h2>

<p>If your site is using WordPress then we make a plugin that allows you to use SSO with your WordPress site. It also helps you set up an embedded forum and embedded comments on your site. <a href="https://wordpress.org/plugins/vanilla-forums/" target="_blank">Get the plugin</a>.</p>



<div class="docs-footer">
    <div class="docs-copyright">
        Copyright &copy 2009-2016 Vanilla Forums, Inc. All rights reserved.
    </div>
    <div class="docs-submenu">
        <ul>
            <li class="docs-submenu-item item-docs"><a href="http://docs.vanillaforums.com">Documentation</a></li>
            <li class="docs-submenu-item item-blog"><a href="https://blog.vanillaforums.com">Blog</a></li>
            <li class="docs-submenu-item item-cloud"><a href="https://vanillaforums.com">Cloud</a></li>
            <li class="docs-submenu-item item-community"><a href="https://vanillaforums.org/discussions">Community</a></li>
            <li class="docs-submenu-item item-github"><a href="https://github.com/vanilla/vanilla">GitHub</a></li>
            <li class="docs-submenu-item item-issues"><a href="https://github.com/vanilla/vanilla/issues">Issues</a></li>
        </ul>
    </div>
</div>